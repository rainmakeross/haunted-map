{% extends "website/base.html" %}

{% block content %}
    <h2>Details</h2>
    <div id="map" style="width:800px; height:300px;"></div>
    {{ haunted_location.name }}<br>


    Latitude: {{ haunted_location.latitude }} <br>
    Longitude: {{ haunted_location.longitude }} <br>
    <div id='address'></div>

{% endblock %}

{% block scripts %}
    /*load the SDK*/
    <script src="http://www.mapquestapi.com/sdk/js/v7.0.s/mqa.toolkit.js?key=Fmjtd%7Cluur296rnh%2C2a%3Do5-90rsdw"></script>

    <script type="text/javascript">

        /*An example of using the MQA.EventUtil to hook into the window load event and execute defined function
         passed in as the last parameter. You could alternatively create a plain function here and have it
         executed whenever you like (e.g. <body onload="yourfunction">).*/

        MQA.EventUtil.observe(window, 'load', function() {

            /*Create an object for options*/
            var options={
                elt:document.getElementById('map'),        /*ID of element on the page where you want the map added*/
                zoom:10,                                   /*initial zoom level of map*/
                latLng:{lat:{{ haunted_location.latitude }}, lng:{{ haunted_location.longitude }}},   /*center of map in latitude/longitude*/
                mtype:'map'                                /*map type (map)*/
            };

            /*Construct an instance of MQA.TileMap with the options object*/
            window.map = new MQA.TileMap(options);

            MQA.withModule('largezoom','traffictoggle','viewoptions','geolocationcontrol','insetmapcontrol','mousewheel', function() {

                map.addControl(
                        new MQA.LargeZoom(),
                        new MQA.MapCornerPlacement(MQA.MapCorner.TOP_LEFT, new MQA.Size(5,5))
                );

                map.addControl(new MQA.TrafficToggle());

                map.addControl(new MQA.ViewOptions());

                map.addControl(
                        new MQA.GeolocationControl(),
                        new MQA.MapCornerPlacement(MQA.MapCorner.TOP_RIGHT, new MQA.Size(10,50))
                );

                /*Inset Map Control options */
                var options={
                    size:{width:150, height:125},
                    zoom:3,
                    mapType:'map',
                    minimized:true
                };

                map.addControl(
                        new MQA.InsetMapControl(options),
                        new MQA.MapCornerPlacement(MQA.MapCorner.BOTTOM_RIGHT)
                );

                map.enableMouseWheelZoom();

                MQA.withModule('geocoder', function() {
                    /*Executes a geocode with an object containing lat/lng properties, adds result to the map, and
                     adds a function to be called once geocoding is complete.*/
                    map.reverseGeocodeAndAddLocation(
                            {lat:{{ haunted_location.latitude }}, lng:{{ haunted_location.longitude }}}, showAddress
                    );

                    /*Example function used to show the address of the geocoded location*/
                    function showAddress(data) {
                        var html = '';
                        var response = data.results[0].locations[0];

                        html = '<p><b>ADDRESS: </b>';
                        html += response.street + ', ';
                        html += response.adminArea5 + ', ' + response.adminArea3 + ' ' + response.postalCode + '</p>';
                        document.getElementById('address').innerHTML = html;
                    }

                });
            });
        });


    </script>

    <script>

    </script>
{% endblock %}